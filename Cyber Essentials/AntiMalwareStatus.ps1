# Function to check and inform the user to manually enable Windows Defender and Real-Time Protection
function Check-EnableDefender {
    Write-Host "`nChecking Windows Defender (Anti-Malware) Status..." -ForegroundColor Cyan

    # Check if Windows Defender service is running
    $defenderService = Get-Service -Name WinDefend -ErrorAction SilentlyContinue

    if ($defenderService.Status -ne "Running") {
        Write-Host "❌ Windows Defender is NOT running! This is a security risk." -ForegroundColor Red
        Write-Host "⚠️ Please enable Windows Defender manually via Windows Security settings." -ForegroundColor Yellow
        Write-Host "➡️ Go to: **Settings > Update & Security > Windows Security > Virus & threat protection**" -ForegroundColor Cyan
    } else {
        Write-Host "✅ Windows Defender is running and protecting the system." -ForegroundColor Green
    }

    # Check if Real-Time Protection is enabled
    $realTimeStatus = Get-MpComputerStatus | Select-Object -ExpandProperty RealTimeProtectionEnabled
    if ($realTimeStatus -eq $false) {
        Write-Host "❌ Windows Defender Real-Time Protection is DISABLED!" -ForegroundColor Red
        Write-Host "⚠️ Please enable Real-Time Protection manually via Windows Security settings." -ForegroundColor Yellow
        Write-Host "➡️ Go to: **Settings > Update & Security > Windows Security > Virus & threat protection > Manage settings > Enable Real-time Protection**" -ForegroundColor Cyan
    } else {
        Write-Host "✅ Real-Time Protection is already ENABLED." -ForegroundColor Green
    }

    # Check if Tamper Protection is enabled
    $tamperStatus = Get-MpComputerStatus | Select-Object -ExpandProperty IsTamperProtected
    if ($tamperStatus -eq $false) {
        Write-Host "❌ Tamper Protection is DISABLED!" -ForegroundColor Red
        Write-Host "⚠️ Tamper Protection must be manually enabled via Windows Security settings." -ForegroundColor Yellow
        Write-Host "➡️ Go to: **Settings > Update & Security > Windows Security > Virus & threat protection > Manage settings > Enable Tamper Protection**" -ForegroundColor Cyan
    } else {
        Write-Host "✅ Tamper Protection is ENABLED." -ForegroundColor Green
    }

    Write-Host "`n⚠️ Some security settings require manual intervention. Please follow the instructions above." -ForegroundColor Yellow
}

# Run the function
Check-EnableDefender
